        const dist = haversineDistance(marker.getLatLng(), m.getLatLng()).toFixed(1);
        const div = document.createElement('div');
        div.className = 'nearby-entry';
        div.dataset.markerId = getMarkerId(m);
        div.innerHTML = `<div class="name-distance"><span>${m.data['First Name']} ${m.data['Last Name']}</span><span class="distance">${dist} km</span></div>
                         <div class="company-name">${m.data['Business Name'] || ''}</div>`;
        div.addEventListener('mouseenter', () => m.getElement().style.filter='drop-shadow(0 0 12px #00f)');
        div.addEventListener('mouseleave', () => m.getElement().style.filter='drop-shadow(0 0 0 rgba(0,0,0,0))');
        listDiv.appendChild(div);
      });
    }

    function highlightCard(marker, hover) {
      const card = document.querySelector(`[data-marker-id="${getMarkerId(marker)}"]`);
      if(card) card.style.backgroundColor = hover ? 'rgba(255,255,255,0.2)' : 'transparent';
    }

    function getMarkerId(marker) {
      const d = marker.data;
      return `${d['First Name']}_${d['Last Name']}_${d['Business Name'] || ''}`.replace(/\s+/g,'_');
    }

    function haversineDistance(latlng1, latlng2) {
      const R = 6371;
      const dLat = (latlng2.lat - latlng1.lat) * Math.PI / 180;
      const dLon = (latlng2.lng - latlng1.lng) * Math.PI / 180;
      const a = Math.sin(dLat/2)**2 + Math.cos(latlng1.lat*Math.PI/180) * Math.cos(latlng2.lat*Math.PI/180) * Math.sin(dLon/2)**2;
      return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    }
  </script>
</body>
</html>
